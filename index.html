<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Display pdf at multi browser version</title>
    <link rel="stylesheet" href="css/tailwind.min.css" />
  </head>

  <body class="bg-gray-100">
    <section class="py-4 md:py-6">
      <h1 class="font-medium text-gray-700 text-3xl md:text-4xl mb-1">
        Using browser plugin
      </h1>

      <p
        id="browser-plugin-description"
        class="font-normal text-gray-500 text-xs md:text-base mb-6"
      ></p>

      <iframe class="w-full h-96" src="assets/sample.pdf"></iframe>
    </section>
    <section class="py-4 md:py-6">
      <h1 class="font-medium text-gray-700 text-3xl md:text-4xl mb-1">
        Using Google viewer
      </h1>

      <iframe id="google-viewer" class="w-full h-96" frameborder="0"></iframe>
    </section>
    <section class="py-4 md:py-6">
      <h1 class="font-medium text-gray-700 text-3xl md:text-4xl mb-1">
        Using pdfjs
      </h1>

      <object
        id="objectPdfViwer"
        class="w-full h-96"
        data="/Display-pdf-at-multi-browser/assets/sample.pdf"
        type="application/pdf"
        onload="objectPdfViwerLoaded()"
        onerror="objectPdfViwerErrored()"
      ></object>
      <!-- <embed
        id="embedPdfViwer"
        class="w-full h-96"
        src="/Display-pdf-at-multi-browser/assets/sample.pdf"
        onload="embedPdfViwerLoaded()"
        onerror="embedPdfViwerErrored()"
      /> -->
      <iframe
        id="pdfjsViwerFrame"
        class="w-full h-96 hidden"
        src="js/pdfjs/web/viewer.html?file=/Display-pdf-at-multi-browser/assets/sample.pdf&pdfbug=all"
      ></iframe>
    </section>
    <section class="py-4 md:py-6">
      <h1 class="font-medium text-gray-700 text-3xl md:text-4xl mb-1">
        Using inline pdfjs
      </h1>

      <iframe class="w-full h-96" src="inline-pdf-viewer.html"></iframe>
    </section>
    <section class="py-4 md:py-6">
      <h1 class="font-medium text-gray-700 text-3xl md:text-4xl mb-1">
        Using pdfjs-legacy
      </h1>

      <iframe
        class="w-full h-96"
        src="js/pdfjs-legacy/web/viewer.html?file=/Display-pdf-at-multi-browser/assets/sample.pdf&pdfbug=all"
      >
      </iframe>
    </section>
    <section class="py-4 md:py-6">
      <h1 class="font-medium text-gray-700 text-3xl md:text-4xl mb-1">
        Using inline pdfjs-legacy
      </h1>

      <iframe class="w-full h-96" src="inline-pdf-legacy-viewer.html"></iframe>
    </section>
  </body>
  <script>
    function checkBrowserSupportPdfViewerPlugin() {
      let pdfViewerPlugin = "Browser does not support PDF Viewer Plugin";
      if ("PDF Viewer" in navigator.plugins) {
        pdfViewerPlugin = "Browser has PDF Viewer Plugin";
      }
      let pdfViewerEnabled = "Browser does not enable PDF Viewer";
      if (navigator.pdfViewerEnabled) {
        pdfViewerEnabled = "Browser enabled PDF Viewer";
      }
      const description = document.getElementById("browser-plugin-description");
      if (description) {
        description.innerHTML = `${pdfViewerPlugin}<br />${pdfViewerEnabled}`;
      }
    }

    function initGoogleViewer() {
      const googleViewer = document.getElementById("google-viewer");
      if (googleViewer) {
        googleViewer.src = `https://docs.google.com/viewer?url=${location.origin}/Display-pdf-at-multi-browser/assets/sample.pdf&embedded=true`;
      }
    }

    function objectPdfViwerLoaded() {
      console.log("objectPdfViwerLoaded");
    }

    function objectPdfViwerErrored() {
      console.log("objectPdfViwerErrored");

      const embedPdfViwer = document.getElementById("embedPdfViwer");
      if (embedPdfViwer) {
        embedPdfViwer.classList.add("hidden");
      }
      const pdfjsViwerFrame = document.getElementById("pdfjsViwerFrame");
      if (pdfjsViwerFrame) {
        pdfjsViwerFrame.classList.remove("hidden");
      }
    }

    function embedPdfViwerLoaded() {
      console.log("embedPdfViwerLoaded");
    }

    function embedPdfViwerErrored() {
      console.log("embedPdfViwerErrored");
    }

    function showFileWithPdfjs(e) {
      console.log("showFileWithPdfjs", e);

      const embedPdfViwer = document.getElementById("embedPdfViwer");
      if (embedPdfViwer) {
        embedPdfViwer.classList.add("hidden");
      }
      const pdfjsViwerFrame = document.getElementById("pdfjsViwerFrame");
      if (pdfjsViwerFrame) {
        pdfjsViwerFrame.classList.remove("hidden");
      }
    }

    function onPageLoaded() {
      checkBrowserSupportPdfViewerPlugin();
      initGoogleViewer();
    }

    function waitingPageLoaded(callback) {
      if (document.readyState === "loading") {
        // Loading hasn't finished yet
        document.addEventListener("DOMContentLoaded", callback);
      } else {
        // `DOMContentLoaded` has already fired
        callback();
      }
    }

    waitingPageLoaded(onPageLoaded);
  </script>
</html>
